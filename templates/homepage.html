<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>𝕾𝖔𝖓𝖔𝖗𝖎𝖉𝖆𝖉𝖊 𝖀𝖓𝖉𝖊𝖗𝖌𝖗𝖆𝖚𝖉</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #111;
      color: white;
    }
    header {
      background-color: #222;
      padding: 20px;
      text-align: center;
      font-size: 28px;
      font-weight: bold;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 10px;
      background-color: #333;
      padding: 10px;
    }
    nav button {
      background-color: #555;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
    }
    .aba {
      display: none;
      padding: 20px;
    }
    input, textarea, select {
      margin: 5px 0;
      padding: 8px;
      width: 100%;
      background-color: #222;
      color: white;
      border: 1px solid #444;
    }
    button {
      margin-top: 10px;
      cursor: pointer;
    }
    #perfil button.logout {
      background-color: #a33;
      margin-top: 20px;
      width: 100%;
    }
    #perfil button.logout:hover {
      background-color: #d44;
    }
    #perfil label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    #fotoPerfil {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid white;
      margin-bottom: 10px;
      display: block;
    }
  </style>
</head>
<body>
  <header>𝕾𝖔𝖓𝖔𝖗𝖎𝖉𝖆𝖉𝖊 𝖀𝖓𝖉𝖊𝖗𝖌𝖗𝖆𝖚𝖉</header>

  <div id="autenticacao" style="display: flex; justify-content: center; gap: 80px; padding: 40px;">
    <div>
      <h2>Login</h2>
      <input type="text" id="loginNome" placeholder="Nome" autocomplete="username" />
      <input type="password" id="loginSenha" placeholder="Senha" autocomplete="current-password" />
      <button onclick="fazerLogin()">Entrar</button>
    </div>
    <div>
      <h2>Cadastro</h2>
      <input type="text" id="cadNome" placeholder="Nome" autocomplete="username" />
      <input type="password" id="cadSenha" placeholder="Senha" autocomplete="new-password" />
      <button onclick="fazerCadastro()">Cadastrar</button>
    </div>
  </div>

  <div id="site" style="display:none;">
    <nav>
      <button onclick="trocarAba('artista')">Artista</button>
      <button onclick="trocarAba('musicas')">Músicas</button>
      <button onclick="trocarAba('albuns')">Álbuns</button>
      <button onclick="trocarAba('perfil')">Perfil</button>
      <button onclick="trocarAba('mensagem')">Mensagem</button>
      <button onclick="trocarAba('sobre')">Sobre</button>
      <button onclick="trocarAba('contato')">Contato</button>
    </nav>

    <div id="artista" class="aba">
      <h2>Artistas Underground</h2>
      <p>Em breve: perfis dos artistas com fotos, músicas e estilo.</p>
    </div>

    <div id="musicas" class="aba">
      <h2>Adicionar / Baixar Músicas</h2>
      <input type="file" accept="audio/*" />
      <button>Upload Música</button>
      <p>Aqui também poderá baixar músicas disponíveis.</p>
    </div>

    <div id="albuns" class="aba">
      <h2>Álbuns / Playlists</h2>
      <input type="text" placeholder="Nome do Álbum" />
      <button>Criar Álbum</button>
      <p>Adicione músicas aos álbuns criados.</p>
    </div>

    <div id="perfil" class="aba">
      <h2>Meu Perfil</h2>

      <!-- Foto do usuário -->
      <img id="fotoPerfil" src="" alt="Foto do Usuário" />

      <label for="trocarFoto">Trocar Foto do Perfil:</label>
      <input type="file" id="trocarFoto" accept="image/*" onchange="trocarFotoPerfil(event)" />

      <p><strong>Usuário logado:</strong> <span id="nomeUsuarioPerfil"></span></p>

      <label for="novoNome">Trocar nome:</label>
      <input type="text" id="novoNome" placeholder="Digite o novo nome" />
      <button onclick="trocarNome()">Atualizar Nome</button>

      <textarea placeholder="Digite algo sobre você..."></textarea>
      <button>Postar Conteúdo</button>

      <button class="logout" onclick="fazerLogout()">Sair</button>
    </div>

    <div id="mensagem" class="aba">
      <h2>Mensagem</h2>
      <p>"A música underground resiste onde o brilho não chega."</p>
    </div>

    <div id="sobre" class="aba">
      <h2>Sobre o Site</h2>
      <p>O site <strong>Sonoridade Underground</strong> é uma plataforma para apoiar, divulgar e fortalecer o trap underground nacional, oferecendo espaço para artistas e fãs explorarem conteúdo autêntico.</p>
    </div>

    <div id="contato" class="aba">
      <h2>Contato</h2>
      <p>Email: <a href="mailto:sonoridadeundergraud674@gmail.com">sonoridadeundergraud674@gmail.com</a></p>
    </div>
  </div>

  <script>
    // Validação básica
    function validarEntrada(nome, senha) {
      if (!nome || !senha) {
        alert('Por favor, preencha nome e senha.');
        return false;
      }
      if (nome.length < 3) {
        alert('Nome deve ter pelo menos 3 caracteres.');
        return false;
      }
      if (senha.length < 4) {
        alert('Senha deve ter pelo menos 4 caracteres.');
        return false;
      }
      return true;
    }

    // Cadastro
    function fazerCadastro() {
      const nome = document.getElementById('cadNome').value.trim();
      const senha = document.getElementById('cadSenha').value.trim();

      if (!validarEntrada(nome, senha)) return;

      if (localStorage.getItem('usuario_' + nome)) {
        alert('Usuário já existe, escolha outro nome.');
        return;
      }

      localStorage.setItem('usuario_' + nome, senha);
      localStorage.setItem('logado', nome);
      alert('Cadastro realizado com sucesso! Você já está logado.');
      iniciarSessao();

      document.getElementById('cadNome').value = '';
      document.getElementById('cadSenha').value = '';
    }

    // Login
    function fazerLogin() {
      const nome = document.getElementById('loginNome').value.trim();
      const senha = document.getElementById('loginSenha').value.trim();

      if (!validarEntrada(nome, senha)) return;

      const salvo = localStorage.getItem('usuario_' + nome);
      if (salvo && salvo === senha) {
        localStorage.setItem('logado', nome);
        iniciarSessao();

        document.getElementById('loginNome').value = '';
        document.getElementById('loginSenha').value = '';
      } else {
        alert('Nome ou senha incorretos');
      }
    }

    // Iniciar sessão
    function iniciarSessao() {
      document.getElementById('autenticacao').style.display = 'none';
      document.getElementById('site').style.display = 'block';
      trocarAba('artista');
      atualizarPerfil();
    }

    // Atualiza nome e foto no perfil
    function atualizarPerfil() {
      const nome = localStorage.getItem('logado');
      document.getElementById('nomeUsuarioPerfil').textContent = nome || '';
      document.getElementById('novoNome').value = '';

      // Pega a foto salva (base64)
      const fotoBase64 = localStorage.getItem('foto_' + nome);
      const imgPerfil = document.getElementById('fotoPerfil');

      if (fotoBase64) {
        imgPerfil.src = fotoBase64;
      } else {
        // Imagem padrão se não tiver foto
        imgPerfil.src = 'https://via.placeholder.com/120?text=Sem+Foto';
      }
    }

    // Trocar nome do usuário
    function trocarNome() {
      const nomeAtual = localStorage.getItem('logado');
      const novoNome = document.getElementById('novoNome').value.trim();

      if (!novoNome) {
        alert('Digite um novo nome.');
        return;
      }
      if (novoNome.length < 3) {
        alert('O nome deve ter pelo menos 3 caracteres.');
        return;
      }
      if (localStorage.getItem('usuario_' + novoNome)) {
        alert('Esse nome já está em uso. Escolha outro.');
        return;
      }

      // Pega senha e foto do usuário atual
      const senha = localStorage.getItem('usuario_' + nomeAtual);
      const foto = localStorage.getItem('foto_' + nomeAtual);

      // Remove dados antigos
      localStorage.removeItem('usuario_' + nomeAtual);
      localStorage.removeItem('foto_' + nomeAtual);

      // Cria novo usuário com os mesmos dados
      localStorage.setItem('usuario_' + novoNome, senha);
      if (foto) localStorage.setItem('foto_' + novoNome, foto);

      // Atualiza login para novo nome
      localStorage.setItem('logado', novoNome);

      alert('Nome atualizado com sucesso!');
      atualizarPerfil();
    }

    // Trocar foto de perfil
    function trocarFotoPerfil(event) {
      const arquivo = event.target.files[0];
      if (!arquivo) return;

      // Limite simples para tamanho da imagem (exemplo: 2MB)
      if (arquivo.size > 2 * 1024 * 1024) {
        alert('Imagem muito grande! Máximo 2MB.');
        return;
      }

      const leitor = new FileReader();
      leitor.onload = function(e) {
        const base64 = e.target.result;
        const nome = localStorage.getItem('logado');
        if (!nome) {
          alert('Nenhum usuário logado.');
          return;
        }
        localStorage.setItem('foto_' + nome, base64);
        atualizarPerfil();
        alert('Foto do perfil atualizada!');
      };
      leitor.readAsDataURL(arquivo);
    }

    // Logout
    function fazerLogout() {
      localStorage.removeItem('logado');
      document.getElementById('site').style.display = 'none';
      document.getElementById('autenticacao').style.display = 'flex';
      document.querySelectorAll('.aba').forEach(aba => aba.style.display = 'none');
    }

    // Trocar aba
    function trocarAba(nome) {
      document.querySelectorAll('.aba').forEach(aba => aba.style.display = 'none');
      document.getElementById(nome).style.display = 'block';
    }

    // Onload
    window.onload = () => {
      const logado = localStorage.getItem('logado');
      if (logado) iniciarSessao();
    };
  </script>
</body>
</html>
